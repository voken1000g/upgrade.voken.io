(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{894:function(t,e,n){"use strict";n.r(e);var r=n(0),o=(n(13),n(17)),c=n.n(o),l={name:"ether-cancel",middleware:["web3"],data:function(){return{txnHash:"0xd5be1ffaba42df65a9a85c6f5eee79fb2f21365d63c821c513eb0a2f0f120f09",txn:{},showCancelBtn:!0,tx:null,txStatus:-1,txHash:null,txConfirmation:0,txMessage:null}},methods:{query:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.state.ether.web3().eth.getTransaction(t.txnHash).then(t.onQuerySuccess).catch(t.onQueryError);case 2:case"end":return e.stop()}}),e)})))()},onQuerySuccess:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:console.log(t),e.txn={blockNumber:t.blockNumber,hash:t.hash,nonce:t.nonce,from:t.from,to:t.to,gas:t.gas,gasPrice:c.a.utils.fromWei(t.gasPrice,"Gwei"),value:c.a.utils.fromWei(t.value,"ether")};case 2:case"end":return n.stop()}}),n)})))()},onQueryError:function(t){return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error("::: P[/ether] get:",t);case 1:case"end":return e.stop()}}),e)})))()},resetTxInfo:function(){this.txStatus=-1,this.txHash=null,this.txConfirmation=0,this.txMessage=null},tryToCancel:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.resetTxInfo(),t.showCancelBtn=!1,t.txStatus=0,n={from:t.$store.state.ether.account,to:t.$store.state.ether.account,value:0,nonce:t.txn.nonce},e.next=6,t.$store.state.ether.web3().eth.sendTransaction(n).on("transactionHash",t.onTransactionHash).on("receipt",t.onReceipt).on("confirmation",t.onConfirmation).on("error",t.onError).catch(t.onError);case 6:case"end":return e.stop()}}),e)})))()},onTransactionHash:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.txStatus=0,e.txHash=t;case 2:case"end":return n.stop()}}),n)})))()},onReceipt:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.txMessage=null,t.status?e.txStatus=1:e.txStatus=3;case 2:case"end":return n.stop()}}),n)})))()},onConfirmation:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.txStatus<3&&t<16&&(t<6?e.txStatus=1:(e.txStatus=2,e.txn={}),e.txConfirmation=t);case 1:case"end":return n.stop()}}),n)})))()},onError:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.showCancelBtn=!0,e.txStatus=3,e.txMessage=t.message;case 3:case"end":return n.stop()}}),n)})))()}}},v=n(2),component=Object(v.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("layout-hero-simple",{scopedSlots:t._u([{key:"title",fn:function(){return[t._v("\n      Try to cancel a transaction\n    ")]},proxy:!0},{key:"text",fn:function(){return[t._v("\n      Try to cancel a pending transaction\n    ")]},proxy:!0}])}),t._v(" "),n("div",{staticClass:"py-16"},[n("div",{staticClass:"resp-wide pb-40"},[t._m(0),t._v(" "),n("div",{staticClass:"resp-mt flex items-end space-x-4"},[n("div",{staticClass:"flex-grow"},[n("label",{staticClass:"block text-sm font-medium leading-5 label",attrs:{for:"tx-hash"}},[t._v("\n            Transaction Hash\n          ")]),t._v(" "),n("div",{staticClass:"relative mt-2"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.txnHash,expression:"txnHash"}],staticClass:"input-indigo w-full py-2 px-3 font-mono text-sm lg:text-base",attrs:{type:"text",id:"tx-hash",placeholder:"0x..."},domProps:{value:t.txnHash},on:{input:function(e){e.target.composing||(t.txnHash=e.target.value)}}})])]),t._v(" "),n("button",{staticClass:"flex-grow-0 btn btn-pink justify-center py-2 px-6 text-sm lg:text-base uppercase",on:{click:t.query}},[t._v("\n          Query\n        ")])]),t._v(" "),t.txn.hash?n("div",[n("div",{staticClass:"resp-mt bg-white shadow overflow-hidden sm:rounded-lg"},[t._m(1),t._v(" "),n("div",{staticClass:"border-t border-gray-200 px-4 py-5 sm:p-0"},[n("dl",{staticClass:"sm:divide-y sm:divide-gray-200"},[t.txn.blockNumber?n("div",{staticClass:"div-striped-list-card"},[n("dt",[t._v("\n                  Block Number\n                ")]),t._v(" "),n("dd",[t._v("\n                  #"+t._s(t.txn.blockNumber)+"\n                ")])]):t._e(),t._v(" "),n("div",{staticClass:"div-striped-list-card"},[n("dt",[t._v("\n                  Tx Hash\n                ")]),t._v(" "),n("dd",[t._v("\n                  "+t._s(t.txn.hash)+"\n                ")])]),t._v(" "),n("div",{staticClass:"div-striped-list-card"},[n("dt",[t._v("\n                  Nonce\n                ")]),t._v(" "),n("dd",[n("span",{staticClass:"font-bold text-2xl text-red-700"},[t._v(t._s(t.txn.nonce))])])]),t._v(" "),n("div",{staticClass:"div-striped-list-card"},[n("dt",[t._v("\n                  From\n                ")]),t._v(" "),n("dd",[t._v("\n                  "+t._s(t.txn.from)+"\n                ")])]),t._v(" "),n("div",{staticClass:"div-striped-list-card"},[n("dt",[t._v("\n                  To\n                ")]),t._v(" "),n("dd",[t._v("\n                  "+t._s(t.txn.to)+"\n                ")])]),t._v(" "),t.txn.value?n("div",{staticClass:"div-striped-list-card"},[n("dt",[t._v("\n                  Value\n                ")]),t._v(" "),n("dd",[t._v("\n                  "+t._s(t.txn.value)+" ETH\n                ")])]):t._e()])])]),t._v(" "),n("div",{staticClass:"mt-4 xl:mt-6 w-full max-w-lg mx-auto text-center"},[t.txn.blockNumber?n("div",{staticClass:"font-bold text-lg xl:text-xl text-red-700"},[t._v("\n            Transaction Status: Success\n          ")]):t.txn.from!==t.$store.state.ether.account?n("div",{staticClass:"font-bold text-lg xl:text-xl text-red-700"},[t._v("\n            Not Your Transaction\n          ")]):n("div",[n("div",{staticClass:"font-bold text-lg xl:text-xl text-red-700"},[t._v("\n              After clicking the button "),n("i",[t._v("Try to cancel")]),t._v(", don't forget to change the nonce to "+t._s(t.txn.nonce)+"\n            ")]),t._v(" "),n("div",{staticClass:"mt-4"},[n("button",{directives:[{name:"show",rawName:"v-show",value:t.showCancelBtn,expression:"showCancelBtn"}],staticClass:"w-full btn justify-center py-2 text-lg",on:{click:t.tryToCancel}},[t._v("\n                Try to cancel\n              ")])]),t._v(" "),n("tx-info",{staticClass:"mt-4",attrs:{status:t.txStatus,hash:t.txHash,confirmation:t.txConfirmation,message:t.txMessage}})],1)])]):t._e()])])],1)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"prose sm:prose-md lg:prose-lg xl:prose-xl max-w-none"},[n("h2",[t._v("\n          What is this for?\n        ")]),t._v(" "),n("p",[t._v("\n          Try to cancel/overwrite/replace a specific pending transaction (or a interaction with a contract).\n        ")]),t._v(" "),n("p",[t._v("\n          This will use the MetaMask extension which is already installed in your Chrome/Firefox/Edge browser.\n        ")]),t._v(" "),n("h2",[t._v("\n          When do you need this?\n        ")]),t._v(" "),n("ul",[n("li",[t._v("\n            If you want to cancel a transaction that has been sent but not yet confirmed\n          ")]),t._v(" "),n("li",[t._v("\n            In most cases it may because the gas price is fairly low, so it seems won't be confirmed in time as you'd expect\n          ")]),t._v(" "),n("li",[t._v("\n            You should only attempt to try this before the transaction is confirmed\n          ")])]),t._v(" "),n("h2",[t._v("\n          How it works?\n        ")]),t._v(" "),n("ol",[n("li",[t._v("\n            Use the same wallet to open this page\n          ")]),t._v(" "),n("li",[t._v("\n            Query the transaction nonce with a hash\n          ")]),t._v(" "),n("li",[t._v("\n            Sign a new transaction (0 ETH to yourself) with higher gas price and the same nonce\n          ")]),t._v(" "),n("li",[t._v("\n            Send it to the Ethereum blockchain\n          ")]),t._v(" "),n("li",[t._v("\n            Waiting for confirmations\n          ")]),t._v(" "),n("li",[t._v("\n            Check the result\n          ")])]),t._v(" "),n("h2",[t._v("\n          Notice\n        ")]),t._v(" "),n("p",[t._v("\n          Just call the previous transaction "),n("b",[t._v("Txn1")]),t._v(" (the one you want to cancel),\n          and call the new transaction "),n("b",[t._v("Txn2")]),t._v(", after you take this action:\n        ")]),t._v(" "),n("ul",[n("li",[t._v("\n            If Txn1 is already completed, Txn2 would get a "),n("b",[t._v("rejected")]),t._v(" error\n          ")]),t._v(" "),n("li",[t._v("\n            If you set a higher gas price for Txn2, it should be accepted with priority and completed successfully\n          ")]),t._v(" "),n("li",[t._v("\n            But if the gas price you set is still lower than the latest level, Txn2 would be another pending transaction, until success; if the gas price rises quickly, Txn2 will take more time than you expect\n          ")])]),t._v(" "),n("h2",[t._v("\n          If the Txn2 complete successfully\n        ")]),t._v(" "),n("ul",[n("li",[t._v("\n            Txn1 would be dropped\n          ")]),t._v(" "),n("li",[t._v("\n            All the ETH and gas of Txn1 would be refund to your address\n          ")]),t._v(" "),n("li",[t._v("\n            As a general transaction, Txn2 will use 21,000 gas\n          ")]),t._v(" "),n("li",[t._v("\n            Txn1 cancellation success\n          ")])]),t._v(" "),n("h2",[t._v("\n          Before you start\n        ")]),t._v(" "),n("p",[t._v("\n          Enable the "),n("b",[t._v("Customize transaction nonce")]),t._v(" option by "),n("i",[t._v("Settings - Advanced - Customize transaction nonce")])]),t._v(" "),n("h2",[t._v("\n          OKay, here you go\n        ")]),t._v(" "),n("p",[t._v("\n          Just fill the a transaction hash below, (you can find it in your wallet APP or\n          "),n("a",{attrs:{target:"_blank",href:"https://etherscan.io"}},[t._v("etherscan.io")]),t._v("),\n          then click the "),n("b",[t._v("QUERY")]),t._v(" button:\n        ")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"div-striped-list-header space-x-2"},[n("div",[n("h3",[t._v("\n                Transaction\n              ")])])])}],!1,null,"38eedf54",null);e.default=component.exports;installComponents(component,{LayoutHeroSimple:n(246).default,TxInfo:n(76).default})}}]);